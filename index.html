<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Overcast</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=demokey&lang=ru_RU" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
<!-- ВСЕГО 4 СТРОКИ ДЛЯ PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#5D8AA8">
<meta name="msapplication-TileColor" content="#5D8AA8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="maskable_icon_x512.png">
</head>
<body>
    <!-- Мобильная версия погодного блока -->
<div class="mobile-weather-container">
    <!-- Плавающие кнопки для мобильных -->
    <div class="mobile-floating-buttons">
    <button class="floating-btn settings-btn">
        <svg class="btn-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        <span class="btn-text">Настройки</span>
    </button>
    
    <button class="floating-btn functions-btn">
        <svg class="btn-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
        </svg>
        <span class="btn-text functions-text">Функции</span>
    </button>
    </div>
    
    <div class="mobile-weather-card">
        <!-- Основная информация -->
        <div class="mobile-location">
            <div class="mobile-city" id="mobile-city">Загрузка...</div>
            <div class="mobile-date" id="mobile-date">--</div>
        </div>

        <div class="mobile-weather-main">
            <div class="mobile-weather-icon" id="mobile-weather-icon">
                <!-- Иконка будет подставлена через JS -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2v4M4.93 4.93l2.83 2.83M2 12h4M4.93 19.07l2.83-2.83M12 22v-4M19.07 19.07l-2.83-2.83M22 12h-4M19.07 4.93l-2.83 2.83"/>
                </svg>
            </div>
            <div class="mobile-temperature" id="mobile-temperature">--°</div>
            <div class="mobile-description" id="mobile-description">--</div>
        </div>
        

        <!-- Основные метрики -->
        <div class="mobile-details-grid">
            <div class="mobile-detail-card mobile-humidity">
                <div class="mobile-detail-value" id="mobile-humidity">--%</div>
                <div class="mobile-detail-label">Влажность</div>
                <div class="mobile-progress-bar">
                    <div class="mobile-progress-fill" id="mobile-humidity-bar"></div>
                </div>
            </div>
            <div class="mobile-detail-card mobile-wind">
                <div class="mobile-detail-value" id="mobile-wind">-- км/ч</div>
                <div class="mobile-detail-label" id="mobile-wind-direction">Ветер --</div>
                <div class="mobile-progress-bar">
                    <div class="mobile-progress-fill" id="mobile-wind-bar"></div>
                </div>
            </div>
            <div class="mobile-detail-card mobile-pressure">
                <div class="mobile-detail-value" id="mobile-pressure">-- мм рт.ст.</div>
                <div class="mobile-detail-label">Давление</div>
                <div class="mobile-progress-bar">
                    <div class="mobile-progress-fill" id="mobile-pressure-bar"></div>
                </div>
            </div>
            <div class="mobile-detail-card mobile-feels-like">
                <div class="mobile-detail-value" id="mobile-feels-like">--°</div>
                <div class="mobile-detail-label">Ощущается</div>
            </div>
        </div>
        

<div class="mobile-additional-cards">
    <!-- 1. Почасовой прогноз -->
    <div class="mobile-additional-card">
        <div class="mobile-card-title">
            <svg class="mobile-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
            Почасовой прогноз
        </div>
        <div class="mobile-hourly-scroll" id="mobile-hourly">
            <!-- Динамически заполнится через JS -->
        </div>
    </div>

    <!-- 2. Прогноз на 5 дней -->
    <div class="mobile-additional-card">
        <div class="mobile-card-title">
            <svg class="mobile-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M8 2v4M16 2v4M3 10h18M5 4h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
            </svg>
            5-дневный прогноз
        </div>
        <div class="mobile-forecast-list" id="mobile-forecast">
            <!-- Динамически заполнится через JS -->
        </div>
    </div>

 <div class="mobile-additional-card">
    <div class="mobile-card-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 18a5 5 0 0 0-10 0"/>
            <line x1="12" y1="2" x2="12" y2="9"/>
            <line x1="4.22" y1="10.22" x2="5.64" y2="11.64"/>
            <line x1="1" y1="18" x2="3" y2="18"/>
            <line x1="21" y1="18" x2="23" y2="18"/>
            <line x1="18.36" y1="11.64" x2="19.78" y2="10.22"/>
            <line x1="23" y1="22" x2="1" y2="22"/>
        </svg>
        <span>Солнце</span>
    </div>
    <div class="mobile-sun-moon-grid">
        <div class="mobile-sun-item">
            <div class="mobile-sun-icon sunrise">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v8"/>
                    <path d="m4.93 10.93 1.41 1.41"/>
                    <path d="M2 18h2"/>
                    <path d="M20 18h2"/>
                    <path d="m19.07 10.93-1.41 1.41"/>
                    <path d="M22 22H2"/>
                    <path d="m8 6 4-4 4 4"/>
                    <path d="M16 18a4 4 0 0 0-8 0"/>
                </svg>
            </div>
            <div class="mobile-sun-text">
                <div class="mobile-sun-time" id="mobile-sunrise">--:--</div>
                <div class="mobile-sun-label">Рассвет</div>
            </div>
        </div>
        <div class="mobile-sun-item">
            <div class="mobile-sun-icon sunset">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 18a5 5 0 0 0-10 0"/>
            <line x1="12" y1="2" x2="12" y2="9"/>
            <line x1="4.22" y1="10.22" x2="5.64" y2="11.64"/>
            <line x1="1" y1="18" x2="3" y2="18"/>
            <line x1="21" y1="18" x2="23" y2="18"/>
            <line x1="18.36" y1="11.64" x2="19.78" y2="10.22"/>
            <line x1="23" y1="22" x2="1" y2="22"/>
        </svg>
            </div>
            <div class="mobile-sun-text">
                <div class="mobile-sun-time" id="mobile-sunset">--:--</div>
                <div class="mobile-sun-label">Закат</div>
            </div>
        </div>
    </div>
</div>


    <!-- 4. Качество воздуха -->
    <div class="mobile-additional-card">
        <div class="mobile-card-title">
            <svg class="mobile-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2v4M4.93 4.93l2.83 2.83M2 12h4M4.93 19.07l2.83-2.83M12 22v-4M19.07 19.07l-2.83-2.83M22 12h-4M19.07 4.93l-2.83 2.83"/>
            </svg>
            Качество воздуха
        </div>
        <div class="mobile-air-quality">
            <div class="mobile-aqi-value" id="mobile-aqi">--</div>
            <div class="mobile-aqi-label" id="mobile-aqi-label">--</div>
        </div>
    </div>
</div>

<div>
            <div class="precipitation-map">
                <div id="map"></div>
                <div class="map-loading">Загрузка карты осадков...</div>
            </div>

            <div class="weather-content">
                <div class="weather-main">
                    <div class="temperature-container">
                        <div class="temperature-icon" id="temperature-icon"></div>
                        <div class="temperature" id="current-temp">
                            <span class="temp-value">--°</span>
                        </div>
                    </div>
                    <div class="feels-like" id="feels-like">Ощущается как --°</div>
                    <div class="weather-description" id="weather-description">--</div>
                    <div class="weather-details">
                        <div class="weather-detail-item" id="rain-info">
                            <span>●</span>
                            <span>--</span>
                        </div>
                        <div class="weather-detail-item" id="wind-info">
                            <span>●</span>
                            <span>--</span>
                        </div>
                    </div>
                </div>

                <div class="tiles-section">
                    <h2 class="section-title">Информация о погоде</h2>
                    <div class="tiles-container">
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>●</span>
                                    <span>Ветер</span>
                                </div>
                            </div>
                            <div class="tile-content" id="wind-details">
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>-- км/ч</span>
                                </div>
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>--</span>
                                </div>
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>Порывы до -- км/ч</span>
                                </div>
                            </div>
                        </div>
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>●</span>
                                    <span>Давление</span>
                                </div>
                            </div>
                            <div class="tile-content" id="pressure-details">
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>-- мм рт. ст.</span>
                                </div>
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>--</span>
                                </div>
                            </div>
                        </div>
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>●</span>
                                    <span>Влажность</span>
                                </div>
                            </div>
                            <div class="tile-content" id="humidity-details">
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>--%</span>
                                </div>
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>--</span>
                                </div>
                            </div>
                        </div>
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>●</span>
                                    <span>Видимость</span>
                                </div>
                            </div>
                            <div class="tile-content" id="visibility-details">
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>-- км</span>
                                </div>
                                <div class="tile-content-item">
                                    <span>●</span>
                                    <span>--</span>
                                </div>
                            </div>
                        </div>
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>●</span>
                                    <span>Точка росы</span>
                                </div>
                            </div>
                            <div class="tile-content dew-point-details" id="dew-point-details">
                                <div class="dew-point-value">--°C</div>
                                <div class="dew-point-comfort">--</div>
                                <div class="dew-point-info">Влажность: --%</div>
                                <div class="dew-point-info">Температура: --°C</div>
                            </div>
                            <div class="accuracy-note italic-text">*(Точность 99.9%) Расчитывается при помощи формулы Магнуса</div>
                        </div>
                        <div class="tile">
                            <div class="tile-header">
                                <div class="tile-title">
                                    <span>Рассвет и Закат</span>
                                </div>
                            </div>
                            <div class="tile-content" id="sun-times">
                                <div class="sun-mini-container">
                                    <div class="sun-mini">
                                        <div class="sun-mini-icon sunrise-icon" id="sunrise-icon"></div>
                                        <div class="sun-mini-label">Рассвет</div>
                                        <div class="sun-mini-time" id="sunrise-time">--:--</div>
                                    </div>
                                    <div class="sun-mini">
                                        <div class="sun-mini-icon sunset-icon" id="sunset-icon"></div>
                                        <div class="sun-mini-label">Закат</div>
                                        <div class="sun-mini-time" id="sunset-time">--:--</div>
                                    </div>
                                </div>

                                <div class="sun-times-city" id="sun-times-city">--</div>
                                <div class="accuracy-note italic-text">*(Точность 10%), работает только в UTC +3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Кастомная кнопка установки PWA -->
<div id="install-prompt" class="install-prompt">
  <div class="install-panel">
    <button class="install-close" id="install-close">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div class="install-content">
      <div class="install-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L12 16M12 16L8 12M12 16L16 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4 20H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="install-text">
        <div class="install-title">Установить приложение</div>
        <div class="install-desc">Для быстрого доступа к прогнозу погоды</div>
      </div>
    </div>
    <button class="install-btn" id="install-btn">Установить</button>
  </div>
</div>

<div id="pc-error" class="pc-error-overlay">
    <div class="pc-error-card">
        <div class="error-icon">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
        </div>
        <h1 class="error-title">Доступ временно ограничен</h1>
        <p class="error-message">Извините этот сайт временно не работает на ноутбуках и компьютерах</p>
        <div class="error-tip">
             Откройте сайт на телефоне или используйте F12 (DevTools)
        </div>
        <div class="error-actions">
            <button class="devtools-btn" onclick="openDevTools()">Проверить снова</button>
        </div>
    </div>
</div>
    <script src="script.js"></script>
</body>
</html>